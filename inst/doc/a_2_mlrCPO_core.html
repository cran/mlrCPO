<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Martin Binder" />

<meta name="date" content="2024-02-20" />

<title>mlrCPO Core</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">mlrCPO Core</h1>
<h4 class="author">Martin Binder</h4>
<h4 class="date">2024-02-20</h4>



<div id="cpo-vignette-navigation" class="section level4">
<h4>CPO Vignette Navigation</h4>
<ol style="list-style-type: decimal">
<li><a href="a_1_getting_started.html">1. First Steps</a> (<a href="z_1_getting_started_terse.html">compact version</a>)</li>
<li>mlrCPO Core (<a href="z_2_mlrCPO_core_terse.html">compact
version</a>)</li>
<li><a href="a_3_all_CPOs.html">CPOs Built Into mlrCPO</a> (<a href="z_3_all_CPOs_terse.html">compact version</a>)</li>
<li><a href="a_4_custom_CPOs.html">Building Custom CPOs</a> (<a href="z_4_custom_CPOs_terse.html">compact version</a>)</li>
</ol>
<h2>
Table of Contents
</h2>
<div id="TOC">
<ul>
<li>
<a href="#introduction">Introduction</a>
</li>
<li>
<a href="#lifecycle-of-a-cpo">Lifecycle of a CPO</a>
<ul>
<li>
<a href="#cpoconstructor">CPOConstructor</a>
</li>
<li>
<a href="#cpo">CPO</a>
<ul>
<li>
<a href="#functions-that-work-on-cpos">Functions that work on CPOs</a>
</li>
<li>
<a href="#cpo-application">CPO Application</a>
</li>
<li>
<a href="#cpo-composition">CPO Composition</a>
</li>
<li>
<a href="#compound-cpo-chaining-and-decomposition">Compound CPO Chaining
and Decomposition</a>
</li>
</ul>
</li>
<li>
<a href="#cpolearner">CPOLearner</a>
<ul>
<li>
<a href="#cpolearner-decomposition">CPOLearner Decomposition</a>
</li>
</ul>
</li>
<li>
<a href="#cpotrained">CPOTrained</a>
<ul>
<li>
<a href="#functions-that-work-on-cpotrained">Functions that work on
CPOTrained</a>
</li>
<li>
<a href="#cpotrained-inspection">CPOTrained Inspection</a>
</li>
<li>
<a href="#cpotrained-are-automatically-chained">CPOTrained are
Automatically Chained</a>
</li>
<li>
<a href="#cpotrained-composition-decomposition-and-chaining">CPOTrained
Composition, Decomposition, and Chaining</a>
</li>
<li>
<a href="#application-of-cpotrained">Application of CPOTrained</a>
</li>
<li>
<a href="#inversion-using-cpotrained">Inversion using CPOTrained</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#nullcpo">NULLCPO</a>
</li>
<li>
<a href="#cpo-name-and-id">CPO Name and ID</a>
</li>
<li>
<a href="#cpo-properties">CPO Properties</a>
<ul>
<li>
<a href="#.sometimes-properties"><code>.sometimes</code>-Properties</a>
</li>
</ul>
</li>
<li>
<a href="#cpo-affect">CPO Affect</a>
</li>
<li>
<a href="#cpo-parameter-export">CPO Parameter Export</a>
</li>
<li>
<a href="#syntactic-sugar">Syntactic Sugar</a>
</li>
</ul>
</div>
</div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This vignette is supposed to be a short reference of the primitives
and tools supplied by the <code>mlrCPO</code> package.</p>
</div>
<div id="lifecycle-of-a-cpo" class="section level2">
<h2>Lifecycle of a CPO</h2>
<p><strong>CPO</strong>s are first-class objects in R that represent
data manipulation. They can be combined to form networks of operation,
they can be attached to <code>mlr</code> <code>Learner</code>s, and they
have tunable Hyperparameters that influence their behaviour.
<code>CPO</code>s go through a lifecycle from construction to
<code>CPO</code> to a <code>CPOTrained</code> “retrafo” or “inverter”
object. The different stages of a <code>CPO</code> related object can be
distinguished using <strong><code>getCPOClass()</code></strong>, which
takes one of five values:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(cpoPca)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOConstructor&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(<span class="fu">cpoPca</span>())</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPO&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(pid.task <span class="sc">%&gt;|%</span> <span class="fu">cpoPca</span>())</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPORetrafo&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(<span class="fu">inverter</span>(bh.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoLogTrafoRegr</span>()))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOInverter&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(NULLCPO)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;NULLCPO&quot;</span></span></code></pre></div>
<div id="cpoconstructor" class="section level3">
<h3>CPOConstructor</h3>
<p><code>CPO</code>s are created using
<strong><code>CPOConstructor</code></strong>s. These are R functions
with a print function and many parameters in common.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cpoAsNumeric)  <span class="co"># example CPOConstructor</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;&lt;CPO as.numeric()&gt;&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cpoAsNumeric, <span class="at">verbose =</span> <span class="cn">TRUE</span>)  <span class="co"># alternative: !cpoAsNumeric</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;&lt;CPO as.numeric()&gt;&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cpo.retrafo:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function (data) </span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     as.data.frame(lapply(data, as.numeric), row.names = rownames(data))</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; }</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:mlrCPO&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(cpoAsNumeric)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOConstructor&quot; &quot;function&quot;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOName</span>(cpoPca)  <span class="co"># same as getCPOName() of the *constructed* CPO</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pca&quot;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(cpoPca)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOConstructor&quot;</span></span></code></pre></div>
<p>The function parameters of a <code>CPOConstructor</code></p>
<ul>
<li>set the <code>CPO</code> Hyperparameters</li>
<li>set the <code>CPO</code> <code>id</code> (default to the
<code>CPO</code>’s <code>name</code>)</li>
<li>resetrict the data columns a CPO operates on (<code>affect.*</code>
parameters)</li>
<li>control which of the <code>CPO</code>’s hyperparameters are
“exported”, i.e. can late be manipulated using
<code>setHyperPars()</code>.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">formals</span>(cpoPca))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;center&quot;                     &quot;scale&quot;                     </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;tol&quot;                        &quot;rank&quot;                      </span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;id&quot;                         &quot;export&quot;                    </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;affect.type&quot;                &quot;affect.index&quot;              </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;affect.names&quot;               &quot;affect.pattern&quot;            </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;affect.invert&quot;              &quot;affect.pattern.ignore.case&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;affect.pattern.perl&quot;        &quot;affect.pattern.fixed&quot;</span></span></code></pre></div>
</div>
<div id="cpo" class="section level3">
<h3>CPO</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">cpo =</span> <span class="fu">cpoScale</span>()) <span class="co"># construct CPO with default Hyperparameter values</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cpo, <span class="at">verbose =</span> <span class="cn">TRUE</span>)  <span class="co"># detailed printing. Alternative: !cpo</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale  logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(cpo)  <span class="co"># CPOs that are not compound are &quot;CPOPrimitive&quot;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOPrimitive&quot; &quot;CPO&quot;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(cpo)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPO&quot;</span></span></code></pre></div>
<div id="functions-that-work-on-cpos" class="section level4">
<h4>Functions that work on CPOs</h4>
<p>The inner “state” of a <code>CPO</code> can be inspected and
manipulated using various getters and setters.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(cpo)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale  logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">getHyperPars</span>(cpo)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $scale.center</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $scale.scale</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">setHyperPars</span>(cpo, <span class="at">scale.center =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = FALSE, scale = TRUE)</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOId</span>(cpo)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;scale&quot;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">setCPOId</span>(cpo, <span class="st">&quot;MYID&quot;</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MYID&lt;scale&gt;(center = TRUE, scale = TRUE)</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOName</span>(cpo)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;scale&quot;</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOAffect</span>(cpo)  <span class="co"># empty, since no affect set</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; named list()</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOAffect</span>(<span class="fu">cpoPca</span>(<span class="at">affect.pattern =</span> <span class="st">&quot;Width$&quot;</span>))</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $pattern</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Width$&quot;</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOConstructor</span>(cpo)  <span class="co"># the constructor used to create the CPO</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;&lt;CPO scale(center = TRUE, scale = TRUE)&gt;&gt;</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOProperties</span>(cpo)  <span class="co"># see properties explanation below</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $handling</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;numerics&quot;   &quot;factors&quot;    &quot;ordered&quot;    &quot;missings&quot;   &quot;cluster&quot;   </span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;classif&quot;    &quot;multilabel&quot; &quot;regr&quot;       &quot;surv&quot;       &quot;oneclass&quot;  </span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;twoclass&quot;   &quot;multiclass&quot; &quot;prob&quot;       &quot;se&quot;        </span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $adding</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $needed</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOPredictType</span>(cpo)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   response       prob         se </span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;response&quot;     &quot;prob&quot;       &quot;se&quot;</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(cpo)</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPO&quot;</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(cpo)  <span class="co"># Operating on feature, target, retrafoless?</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;feature&quot;</span></span></code></pre></div>
<p>Compare the predict type and operating type of a TOCPO or ROCPO:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOPredictType</span>(<span class="fu">cpoResponseFromSE</span>())</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; response       se </span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     &quot;se&quot;     &quot;se&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(<span class="fu">cpoResponseFromSE</span>())</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;target&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(<span class="fu">cpoSample</span>())</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;retrafoless&quot;</span></span></code></pre></div>
<p>The <code>identicalCPO()</code> function is used to check whether the
<em>underlying operation</em> of two <code>CPO</code>s is identical. For
this understanding, <code>CPO</code>s with different hyperparameters can
still be “identical”.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identicalCPO</span>(<span class="fu">cpoScale</span>(<span class="at">scale =</span> <span class="cn">TRUE</span>), <span class="fu">cpoScale</span>(<span class="at">scale =</span> <span class="cn">FALSE</span>))</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">identicalCPO</span>(<span class="fu">cpoScale</span>(), <span class="fu">cpoPca</span>())</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div id="cpo-application" class="section level4">
<h4>CPO Application</h4>
<p><code>CPO</code>s can be applied to <code>data.frame</code> and
<code>Task</code> objects using <code>%&gt;&gt;%</code> or
<code>applyCPO</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoPca</span>()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species        PC1          PC2         PC3           PC4</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa -0.1634147  0.017230444 -0.11038321 -0.0231625616</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa  0.3324970 -0.189351624 -0.08152883  0.0005612917</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa  0.3268659  0.101103375 -0.02238439  0.0464537730</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa  0.4202367  0.005523981  0.17106514 -0.0222757931</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa -0.1768684  0.140149101 -0.04185224 -0.0194870755</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa -0.7393165 -0.074655279  0.08508352  0.0179103657</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>task <span class="ot">=</span> <span class="fu">applyCPO</span>(<span class="fu">cpoPca</span>(), iris.task)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">getTaskData</span>(task))</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species       PC1        PC2         PC3          PC4</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa -2.684126 -0.3193972  0.02791483  0.002262437</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa -2.714142  0.1770012  0.21046427  0.099026550</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa -2.888991  0.1449494 -0.01790026  0.019968390</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa -2.745343  0.3182990 -0.03155937 -0.075575817</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa -2.728717 -0.3267545 -0.09007924 -0.061258593</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa -2.280860 -0.7413304 -0.16867766 -0.024200858</span></span></code></pre></div>
</div>
<div id="cpo-composition" class="section level4">
<h4>CPO Composition</h4>
<p><code>CPO</code> composition can be done using
<code>%&gt;&gt;%</code> or <code>composeCPO</code>. It results in a new
CPO which mostly behaves like a primitive CPO. Exceptions are:</p>
<ul>
<li>Compound CPOs have no <code>id</code></li>
<li>Affect of compound CPOs cannot be retrieved</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>scale <span class="ot">=</span> <span class="fu">cpoScale</span>()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>pca <span class="ot">=</span> <span class="fu">cpoPca</span>()</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>compound <span class="ot">=</span> scale <span class="sc">%&gt;&gt;%</span> pca</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">composeCPO</span>(scale, pca)  <span class="co"># same</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (scale &gt;&gt; pca)(scale.center = TRUE, scale.scale = TRUE, pca.center = TRUE, pca.scale = FALSE)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(compound)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOPipeline&quot; &quot;CPO&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>compound</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 2 cpos:</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale  logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ====&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca(center = TRUE, scale = FALSE)[not exp&#39;d: tol = &lt;NULL&gt;, rank = &lt;NULL&gt;]</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Type len   Def Constr Req Tunable Trafo</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.center logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.scale  logical   - FALSE      -   -    TRUE     -</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOName</span>(compound)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pca.scale&quot;</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="fu">getHyperPars</span>(compound)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $scale.center</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $scale.scale</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $pca.center</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $pca.scale</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="fu">setHyperPars</span>(compound, <span class="at">scale.center =</span> <span class="cn">TRUE</span>, <span class="at">pca.center =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (scale &gt;&gt; pca)(scale.center = TRUE, scale.scale = TRUE, pca.center = FALSE, pca.scale = FALSE)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOId</span>(compound)  <span class="co"># error: no ID for compound CPOs</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in getCPOId.CPO(compound): Compound CPOs have no IDs.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOAffect</span>(compound)  <span class="co"># error: no affect for compound CPOs</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in getCPOAffect.CPO(compound): Compound CPOs have no affect arguments.</span></span></code></pre></div>
<p><code>getCPOOperatingType()</code> always considers the operating
type of the whole <code>CPO</code> chain and may return multiple
values:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(NULLCPO)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(<span class="fu">cpoScale</span>())</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;feature&quot;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(<span class="fu">cpoScale</span>() <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoLogTrafoRegr</span>() <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoSample</span>())</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;feature&quot;     &quot;target&quot;      &quot;retrafoless&quot;</span></span></code></pre></div>
</div>
<div id="compound-cpo-chaining-and-decomposition" class="section level4">
<h4>Compound CPO Chaining and Decomposition</h4>
<p>Composite <code>CPO</code> objects can be broken into their
constituent primitive <code>CPO</code>s using <code>as.list()</code>.
The inverse of this operation is <code>pipeCPO()</code>, which composes
a list of <code>CPO</code>s in the given order.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.list</span>(compound)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca(center = TRUE, scale = FALSE)[not exp&#39;d: tol = &lt;NULL&gt;, rank = &lt;NULL&gt;]</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pipeCPO</span>(<span class="fu">as.list</span>(compound))  <span class="co"># chainCPO: (list of CPO) -&gt; CPO</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (scale &gt;&gt; pca)(scale.center = TRUE, scale.scale = TRUE, pca.center = TRUE, pca.scale = FALSE)</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">pipeCPO</span>(<span class="fu">list</span>())</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span></code></pre></div>
</div>
</div>
<div id="cpolearner" class="section level3">
<h3>CPOLearner</h3>
<p>CPO-Learner attachment works using <code>%&gt;&gt;%</code> or
<code>attachCPO</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>lrn <span class="ot">=</span> <span class="fu">makeLearner</span>(<span class="st">&quot;classif.logreg&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>(<span class="at">cpolrn =</span> cpo <span class="sc">%&gt;&gt;%</span> lrn)  <span class="co"># the new learner has the CPO hyperparameters</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Learner classif.logreg.scale from package stats</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Type: classif</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: ; Short name: </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Class: CPOLearner</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Properties: numerics,factors,twoclass,prob</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Predict-Type: response</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hyperparameters: model=FALSE</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="fu">attachCPO</span>(compound, lrn)  <span class="co"># attaching compound CPO</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Learner classif.logreg.pca.scale from package stats</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Type: classif</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: ; Short name: </span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Class: CPOLearner</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Properties: numerics,factors,twoclass,prob</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Predict-Type: response</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hyperparameters: model=FALSE</span></span></code></pre></div>
<p>The new object is a <code>CPOLearner</code>, which performs the
operation given by the <code>CPO</code> before trainign the
<code>Learner</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lrn)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;classif.logreg&quot;  &quot;RLearnerClassif&quot; &quot;RLearner&quot;        &quot;Learner&quot;</span></span></code></pre></div>
<p>The work performed by a <code>CPOLearner</code> can also be performed
manually:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>lrn <span class="ot">=</span> <span class="fu">cpoLogTrafoRegr</span>() <span class="sc">%&gt;&gt;%</span> <span class="fu">makeLearner</span>(<span class="st">&quot;regr.lm&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">=</span> <span class="fu">train</span>(lrn, <span class="fu">subsetTask</span>(bh.task, <span class="dv">1</span><span class="sc">:</span><span class="dv">300</span>))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(model, <span class="fu">subsetTask</span>(bh.task, <span class="dv">301</span><span class="sc">:</span><span class="dv">500</span>))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Prediction: 200 observations</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; predict.type: response</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; threshold: </span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; time: 0.00</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     id truth response</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 301  1  24.8 28.69715</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 302  2  22.0 27.89821</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 303  3  26.4 28.33370</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 304  4  33.1 33.80868</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 305  5  36.1 34.93957</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 306  6  28.4 28.77130</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ... (#rows: 200, #cols: 3)</span></span></code></pre></div>
<p>is equivalent to</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>trafo <span class="ot">=</span> <span class="fu">subsetTask</span>(bh.task, <span class="dv">1</span><span class="sc">:</span><span class="dv">300</span>) <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoLogTrafoRegr</span>()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">=</span> <span class="fu">train</span>(<span class="st">&quot;regr.lm&quot;</span>, trafo)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>newdata <span class="ot">=</span> <span class="fu">subsetTask</span>(bh.task, <span class="dv">301</span><span class="sc">:</span><span class="dv">500</span>) <span class="sc">%&gt;&gt;%</span> <span class="fu">retrafo</span>(trafo)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">=</span> <span class="fu">predict</span>(model, newdata)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">invert</span>(<span class="fu">inverter</span>(newdata), pred)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Prediction: 200 observations</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; predict.type: response</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; threshold: </span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; time: 0.00</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     id truth response</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 301  1  24.8 28.69715</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 302  2  22.0 27.89821</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 303  3  26.4 28.33370</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 304  4  33.1 33.80868</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 305  5  36.1 34.93957</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 306  6  28.4 28.77130</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ... (#rows: 200, #cols: 3)</span></span></code></pre></div>
<div id="cpolearner-decomposition" class="section level4">
<h4>CPOLearner Decomposition</h4>
<p>It is possible to obtain both the underlying <code>Learner</code> and
the attached <code>CPO</code> from a <code>CPOLearner</code>. Note that
if a <code>CPOLearner</code> is wrapped by some method (e.g. a
<code>TuneWrapper</code>), this does not work, since <code>CPO</code>
can not probe below the first wrapping layer.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getLearnerCPO</span>(cpolrn)  <span class="co"># the CPO</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getLearnerBare</span>(cpolrn)  <span class="co"># the Learner</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Learner classif.logreg from package stats</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Type: classif</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: Logistic Regression; Short name: logreg</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Class: classif.logreg</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Properties: twoclass,numerics,factors,prob,weights</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Predict-Type: response</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hyperparameters: model=FALSE</span></span></code></pre></div>
</div>
</div>
<div id="cpotrained" class="section level3">
<h3>CPOTrained</h3>
<p>CPOs perform data-dependent operation. However, when this operation
becomes part of a machine-learning process, the operation on
predict-data must depend only on the training data. A
<code>CPORetrafo</code> object represents the re-application of a
trained CPO. A <code>CPOInverter</code> object represents the
transformation of a prediction made on a transformed task back to the
form of the original data.</p>
<p>The <code>CPOTrained</code> objects generated by application of a
<code>CPO</code> (or application of another <code>CPOTrained</code>) can
be retrieved using the <code>retrafo()</code> or the
<code>inverter()</code> function.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>transformed <span class="ot">=</span> iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(transformed)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052  setosa</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052  setosa</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052  setosa</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052  setosa</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052  setosa</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667  setosa</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>(<span class="at">ret =</span> <span class="fu">retrafo</span>(transformed))</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)]</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">getTaskTargets</span>(bh.task))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 24.0 21.6 34.7 33.4 36.2 28.7</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>transformed <span class="ot">=</span> bh.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoLogTrafoRegr</span>()</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">getTaskTargets</span>(transformed))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.178054 3.072693 3.546740 3.508556 3.589059 3.356897</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>(<span class="at">inv =</span> <span class="fu">inverter</span>(transformed))</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Inverter chain {type:regr} (able to predict &#39;response&#39;, &#39;se&#39;)</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [INVERTER fun.apply.regr.target(){type:regr}]</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">invert</span>(inv, <span class="fu">getTaskTargets</span>(transformed)))</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 24.0 21.6 34.7 33.4 36.2 28.7</span></span></code></pre></div>
<p>Retrafos and inverters are stored as attributes:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(transformed)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $names</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;type&quot;        &quot;env&quot;         &quot;weights&quot;     &quot;blocking&quot;    &quot;coordinates&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;task.desc&quot;  </span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;RegrTask&quot;       &quot;SupervisedTask&quot; &quot;Task&quot;          </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $retrafo</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo / Inverter chain {type:regr} (able to predict &#39;response&#39;, &#39;se&#39;)</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO fun.apply.regr.target(){type:regr}]</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $inverter</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Inverter chain {type:regr} (able to predict &#39;response&#39;, &#39;se&#39;)</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [INVERTER fun.apply.regr.target(){type:regr}]</span></span></code></pre></div>
<p>It is possible to <em>set</em> the <code>&quot;retrafo&quot;</code> and
<code>&quot;inverter&quot;</code> attributes of an object using
<code>retrafo()</code> and <code>inverter()</code>. This can be useful
for writing elegant scripts, especially since <a href="#cpotrained-are-automatically-chained">CPOTrained are
automatically chained</a>. To delete the <code>CPOTrained</code>
attribute of an object, set it to <code>NULL</code> or
<code>NULLCPO</code>, or use <code>clearRI()</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>bh2 <span class="ot">=</span> bh.task</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(bh2) <span class="ot">=</span> ret</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(bh2)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $names</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;type&quot;        &quot;env&quot;         &quot;weights&quot;     &quot;blocking&quot;    &quot;coordinates&quot;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;task.desc&quot;  </span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;RegrTask&quot;       &quot;SupervisedTask&quot; &quot;Task&quot;          </span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $retrafo</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)]</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(bh2) <span class="ot">=</span> NULLCPO</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># equivalent:</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retrafo(bh2) = NULL</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(bh2)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $names</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;type&quot;        &quot;env&quot;         &quot;weights&quot;     &quot;blocking&quot;    &quot;coordinates&quot;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;task.desc&quot;  </span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;RegrTask&quot;       &quot;SupervisedTask&quot; &quot;Task&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># clearRI returns the object without retrafo or inverter attributes</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>bh3 <span class="ot">=</span> <span class="fu">clearRI</span>(transformed)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(bh3)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $names</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;type&quot;        &quot;env&quot;         &quot;weights&quot;     &quot;blocking&quot;    &quot;coordinates&quot;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;task.desc&quot;  </span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;RegrTask&quot;       &quot;SupervisedTask&quot; &quot;Task&quot;</span></span></code></pre></div>
<div id="functions-that-work-on-cpotrained" class="section level4">
<h4>Functions that work on CPOTrained</h4>
<p>General methods that work on <code>CPOTrained</code> object to
inspect its object properties. Many methods that work on a
<code>CPO</code> also work on a <code>CPOTrained</code> and give the
same result.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOName</span>(ret)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;scale&quot;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(ret)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; center logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale  logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">getHyperPars</span>(ret)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $center</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $scale</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOProperties</span>(ret)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $handling</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;numerics&quot;   &quot;factors&quot;    &quot;ordered&quot;    &quot;missings&quot;   &quot;cluster&quot;   </span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;classif&quot;    &quot;multilabel&quot; &quot;regr&quot;       &quot;surv&quot;       &quot;oneclass&quot;  </span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;twoclass&quot;   &quot;multiclass&quot; &quot;prob&quot;       &quot;se&quot;        </span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $adding</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $needed</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOPredictType</span>(ret)</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   response       prob         se </span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;response&quot;     &quot;prob&quot;       &quot;se&quot;</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(ret)  <span class="co"># Operating on feature, target, both?</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;feature&quot;</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(inv)</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;target&quot;</span></span></code></pre></div>
<p>A <code>CPOTrained</code> has information about whether it can be
used as a <code>CPORetrafo</code> object (and be applied to new data
using <code>%&gt;&gt;%</code>), or as a <code>CPOInverter</code> object
(and used by <code>invert()</code>), or possibly both. This is given by
<code>getCPOTrainedCapability()</code>, which returns a <code>1</code>
if the object has an effect in the given role, <code>0</code> if the
object has no effect (but can be used), or <code>-1</code> if the object
can not be used in the role.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedCapability</span>(ret)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; retrafo  invert </span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       1       0</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedCapability</span>(inv)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; retrafo  invert </span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      -1       1</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedCapability</span>(NULLCPO)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; retrafo  invert </span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       0       0</span></span></code></pre></div>
<p>The “<code>CPO</code> class” of a <code>CPOTrained</code> is
determined by this as well. A pure inverter is <code>CPOInverter</code>,
an object that can be used for retrafo is a <code>CPORetrafo</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(ret)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPORetrafo&quot;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(inv)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CPOInverter&quot;</span></span></code></pre></div>
<p>The <code>CPO</code> and the <code>CPOConstructor</code> used to
create the `CPOTrained can be queried.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedCPO</span>(ret)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOConstructor</span>(ret)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;&lt;CPO scale(center = TRUE, scale = TRUE)&gt;&gt;</span></span></code></pre></div>
</div>
<div id="cpotrained-inspection" class="section level4">
<h4>CPOTrained Inspection</h4>
<p><code>CPOTrained</code> objects can be inspected using
<code>getCPOTrainedState()</code>. The state contains the
hyperparameters, the <code>control</code> object (CPO dependent data
representing the data information needed to re-apply the operation), and
information about the <code>Task</code> / <code>data.frame</code> layout
used for training (column names, column types) in
<code>data$shapeinfo.input</code> and
<code>data$shapeinfo.output</code>.</p>
<p>The state can be manipulated and used to create new
<code>CPOTrained</code>s, using
<code>makeCPOTrainedFromState()</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">state =</span> <span class="fu">getCPOTrainedState</span>(<span class="fu">retrafo</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>())))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $center</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $scale</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $control</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $control$center</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width </span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     5.843333     3.057333     3.758000     1.199333 </span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $control$scale</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width </span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    0.8280661    0.4358663    1.7652982    0.7622377 </span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $data</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $data$shapeinfo.input</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;ShapeInfo (input) Sepal.Length: num, Sepal.Width: num, Petal.Length: num, Petal.Width: num, Species: fac&gt;</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $data$shapeinfo.output</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;ShapeInfo (output)&gt;:</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; numeric:</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;ShapeInfo Sepal.Length: num, Sepal.Width: num, Petal.Length: num, Petal.Width: num&gt;</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; factor:</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;ShapeInfo Species: fac&gt;</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; other:</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;ShapeInfo (empty)&gt;</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>state<span class="sc">$</span>control<span class="sc">$</span>center[<span class="dv">1</span>] <span class="ot">=</span> <span class="dv">1000</span>  <span class="co"># will now subtract 1000 from the first column</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>new.retrafo <span class="ot">=</span> <span class="fu">makeCPOTrainedFromState</span>(cpoScale, state)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> new.retrafo)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    -1201.474  1.01560199    -1.335752   -1.311052  setosa</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    -1201.716 -0.13153881    -1.335752   -1.311052  setosa</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    -1201.957  0.32731751    -1.392399   -1.311052  setosa</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    -1202.078  0.09788935    -1.279104   -1.311052  setosa</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    -1201.595  1.24503015    -1.335752   -1.311052  setosa</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    -1201.112  1.93331463    -1.165809   -1.048667  setosa</span></span></code></pre></div>
</div>
<div id="cpotrained-are-automatically-chained" class="section level4">
<h4>CPOTrained are Automatically Chained</h4>
<p>When executing <code>data %&gt;&gt;% CPO</code>, the result has an
associated <code>CPORetrafo</code> and <code>CPOInverter</code> object.
When applying another <code>CPO</code>, the <code>CPORetrafo</code> and
<code>CPOInverter</code> will be chained automatically. This is to make
<code>(data %&gt;&gt;% CPO1) %&gt;&gt;% CPO2</code> work the same as
<code>data %&gt;&gt;% (CPO1 %&gt;&gt;% CPO2)</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoPca</span>()</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(data)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = TRUE, scale = FALSE)]</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">=</span> data <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span></code></pre></div>
<p><code>retrafo(data2)</code> is the same as
<code>retrafo(data %&gt;&gt;% pca %&gt;&gt;% scale)</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(data2)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = TRUE, scale = FALSE)] =&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)]</span></span></code></pre></div>
<p>To interrupt this chain, set retrafo to <code>NULL</code> either
explicitly, or using <code>clearRI()</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">clearRI</span>(data)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">=</span> data <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(data2)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)]</span></span></code></pre></div>
<p>this is equivalent to</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(data) <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inverter</span>(data) <span class="ot">=</span> <span class="cn">NULL</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">=</span> data <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(data3)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)]</span></span></code></pre></div>
</div>
<div id="cpotrained-composition-decomposition-and-chaining" class="section level4">
<h4>CPOTrained Composition, Decomposition, and Chaining</h4>
<p><code>CPOTrained</code> can be composed using <code>%&gt;&gt;%</code>
and <code>pipeCPO()</code>, just like <code>CPO</code>s. They can also
be split apart into primitive parts using <code>as.list</code>. It is
recommended to only chain <code>CPOTrained</code> objects if they were
created in the given order by preprocessing operations, since
<code>CPOTrained</code>s are very dependent on their position within a
preprocessing pipeline.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>compound.retrafo <span class="ot">=</span> <span class="fu">retrafo</span>(<span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> compound)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>compound.retrafo</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)] =&gt;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = TRUE, scale = FALSE)]</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">retrafolist =</span> <span class="fu">as.list</span>(compound.retrafo))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)]</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = TRUE, scale = FALSE)]</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>retrafolist[[<span class="dv">1</span>]] <span class="sc">%&gt;&gt;%</span> retrafolist[[<span class="dv">2</span>]]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)] =&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = TRUE, scale = FALSE)]</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pipeCPO</span>(retrafolist)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO scale(center = TRUE, scale = TRUE)] =&gt;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = TRUE, scale = FALSE)]</span></span></code></pre></div>
</div>
<div id="application-of-cpotrained" class="section level4">
<h4>Application of CPOTrained</h4>
<p>Similarly to <code>CPO</code>s, <code>CPOTrained</code> objects can
be applied to data using <code>%&gt;&gt;%</code>, <code>applyCPO</code>,
or <code>predict</code>. This only works with objects that have the
<code>&quot;retrafo&quot;</code> capability and hence the <code>CPORetrafo</code>
class.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>transformed <span class="ot">=</span> iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> <span class="fu">retrafo</span>(transformed)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052  setosa</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052  setosa</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052  setosa</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052  setosa</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052  setosa</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667  setosa</span></span></code></pre></div>
<p>Should in general give the same as <code>head(transformed)</code>,
since the same data was used:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(transformed)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052  setosa</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052  setosa</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052  setosa</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052  setosa</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052  setosa</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667  setosa</span></span></code></pre></div>
<p><strong><code>applyCPO()</code></strong> and
<strong><code>predict()</code></strong> are synonyms of
<code>%&gt;&gt;%</code> when used for <code>CPORetrafo</code>
objects:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">applyCPO</span>(<span class="fu">retrafo</span>(transformed), <span class="fu">head</span>(iris))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(<span class="fu">retrafo</span>(transformed), <span class="fu">head</span>(iris))</span></code></pre></div>
</div>
<div id="inversion-using-cpotrained" class="section level4">
<h4>Inversion using CPOTrained</h4>
<p>To use <code>CPOTrained</code> objects for inversion, the
<code>invert()</code> function is used. Besides the
<code>CPOTrained</code>, it takes the data to invert, and optionally the
<code>predict.type</code>. Typically <code>CPOTrained</code> objects
that were retrieved using <code>inverter()</code> from a transformed
dataset should be used for inversion. Retrafo <code>CPOTrained</code>
objects retrieved from a transformed data set using
<code>retrafo()</code> sometimes have both the <code>&quot;retrafo&quot;</code> as
well as the <code>&quot;invert&quot;</code> capability (precisely when all TOCPOs
used had the <code>constant.invert</code> flag set, see <a href="a_4_custom_CPOs.html">Building Custom CPOs</a>) and can then also
be used for inversion. In that case, however, the <code>&quot;truth&quot;</code>
column of an inverted prediction is dropped.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>transformed <span class="ot">=</span> bh.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoLogTrafoRegr</span>()</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>prediction <span class="ot">=</span> <span class="fu">predict</span>(<span class="fu">train</span>(<span class="st">&quot;regr.lm&quot;</span>, transformed), transformed)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>inv <span class="ot">=</span> <span class="fu">inverter</span>(transformed)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">invert</span>(inv, prediction)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Prediction: 506 observations</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; predict.type: response</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; threshold: </span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; time: 0.00</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id truth response</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1  24.0 29.46569</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2  21.6 24.65039</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3  34.7 30.48177</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  4  33.4 28.91454</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  5  36.2 27.40745</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  6  28.7 25.77416</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ... (#rows: 506, #cols: 3)</span></span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>ret <span class="ot">=</span> <span class="fu">retrafo</span>(transformed)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">invert</span>(ret, prediction)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Prediction: 506 observations</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; predict.type: response</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; threshold: </span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; time: 0.00</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id response</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1 29.46569</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2 24.65039</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3 30.48177</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  4 28.91454</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  5 27.40745</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  6 25.77416</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ... (#rows: 506, #cols: 2)</span></span></code></pre></div>
<p>Inversion can be done on both predictions given by <code>mlr</code>
<code>Learner</code>s, as well as plain vectors,
<code>data.frame</code>s, and <code>matrix</code> objects.</p>
<p>Note that the prediction being inverted must have the form of a
prediction done with the <code>predict.type</code> that an inverter
expects as input for the <code>predict.type</code> given to
<code>invert()</code> as an argument. This can be queried using the
<code>getCPOPredictType()</code> function. If <code>invert()</code> is
called with <code>predict.type = p</code>, then the prediction must be
one made with a <code>Learner</code> that has <code>predict.type</code>
set to <code>getCPOPredictType(cpo)[p]</code>.</p>
</div>
</div>
</div>
<div id="nullcpo" class="section level2">
<h2>NULLCPO</h2>
<p><code>NULLCPO</code> is the neutral element of
<code>%&gt;&gt;%</code> and the operations it represents
(<code>composeCPO()</code>, <code>applyCPO()</code>, and
<code>attachCPO()</code>), i.e. when it is used as an argument of these
functions, the data, <code>Learner</code> or <code>CPO</code> is not
changed. <code>NULLCPO</code> is also the result <code>pipeCPO()</code>
called with the empty list, and of <code>retrafo()</code> and
<code>inverter()</code> when they are called for objects with no
<code>CPOTrained</code> objects attached.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pipeCPO</span>(<span class="fu">list</span>())</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.list</span>(NULLCPO)  <span class="co"># the inverse of pipeCPO</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; list()</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">retrafo</span>(bh.task)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">inverter</span>(bh.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoPca</span>())  <span class="co"># cpoPca is a TOCPO, so no inverter is created</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span></code></pre></div>
<p>Many getters give characteristic results for
<code>NULLCPO</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOClass</span>(NULLCPO)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;NULLCPO&quot;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOName</span>(NULLCPO)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;NULLCPO&quot;</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOId</span>(NULLCPO)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;NULLCPO&quot;</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="fu">getHyperPars</span>(NULLCPO)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; named list()</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(NULLCPO)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Empty parameter set.&quot;</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOAffect</span>(NULLCPO)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; named list()</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOOperatingType</span>(NULLCPO)  <span class="co"># operates neither on features nor on targets.</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOProperties</span>(NULLCPO)</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $handling</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;numerics&quot;   &quot;factors&quot;    &quot;ordered&quot;    &quot;missings&quot;   &quot;cluster&quot;   </span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;classif&quot;    &quot;multilabel&quot; &quot;regr&quot;       &quot;surv&quot;       &quot;oneclass&quot;  </span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;twoclass&quot;   &quot;multiclass&quot; &quot;prob&quot;       &quot;se&quot;        </span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $adding</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $needed</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a><span class="co"># applying NULLCPO leads to a retrafo() of NULLCPO, so it is its own CPOTrainedCPO</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedCPO</span>(NULLCPO)</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a><span class="co"># NULLCPO has no effect on applyCPO and invert, so NULLCPO&#39;s capabilities are 0.</span></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedCapability</span>(NULLCPO)</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; retrafo  invert </span></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       0       0</span></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedState</span>(NULLCPO)</span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Some helper functions convert <code>NULLCPO</code> to
<code>NULL</code> and back, while leaving other values as they are.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nullToNullcpo</span>(<span class="cn">NULL</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nullcpoToNull</span>(NULLCPO)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nullToNullcpo</span>(<span class="dv">10</span>) <span class="co"># not changed</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nullcpoToNull</span>(<span class="dv">10</span>) <span class="co"># ditto</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
</div>
<div id="cpo-name-and-id" class="section level2">
<h2>CPO Name and ID</h2>
<p>A <code>CPO</code> has a “name” which identifies the general
operation done by this <code>CPO</code>. For example, it is
<code>&quot;pca&quot;</code> for a <code>CPO</code> created using
<code>cpoPca()</code>. Furthermore, a <code>CPO</code> has an “ID” which
is associated with the particular <code>CPO</code> object at hand. For
primitive <code>CPO</code>s, it can be queried and set using
<code>getCPOId()</code> and <code>setCPOId()</code>, and it can be set
during construction, but it <em>defaults</em> to the <code>CPO</code>’s
name. The ID will also be prefixed to the <code>CPO</code>’s
hyperparameters after construction, if they are exported. This can help
prevent hyperparameter name clashes when composing <code>CPO</code>s
with otherwise identical hyperparameter names. It is possible to set the
ID to <code>NULL</code> to have no prefix for hyperparameter names.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>cpo <span class="ot">=</span> <span class="fu">cpoPca</span>()</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOId</span>(cpo)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pca&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(cpo)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Type len   Def Constr Req Tunable Trafo</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.center logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.scale  logical   - FALSE      -   -    TRUE     -</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(<span class="fu">setCPOId</span>(cpo, <span class="st">&quot;my.id&quot;</span>))</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len   Def Constr Req Tunable Trafo</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; my.id.center logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; my.id.scale  logical   - FALSE      -   -    TRUE     -</span></span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(<span class="fu">setCPOId</span>(cpo, <span class="cn">NULL</span>))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Type len   Def Constr Req Tunable Trafo</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; center logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale  logical   - FALSE      -   -    TRUE     -</span></span></code></pre></div>
<p>In the following (silly) example an error is thrown because of
hyperparameter name clash. This can be avoided by setting the ID of one
of the constituents to a different value.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>cpo <span class="sc">%&gt;&gt;%</span> cpo</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in parameterClashAssert(cpo1, cpo2, cpo1$debug.name, cpo2$debug.name): Parameters &quot;pca.center&quot;, &quot;pca.scale&quot; occur in both pca and pca</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Use the id parameter when constructing, or setCPOId, to prevent name collisions.</span></span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>cpo <span class="sc">%&gt;&gt;%</span> <span class="fu">setCPOId</span>(cpo, <span class="st">&quot;two&quot;</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (pca &gt;&gt; two&lt;pca&gt;)(pca.center = TRUE, pca.scale = FALSE, two.center = TRUE, two.scale = FALSE)</span></span></code></pre></div>
</div>
<div id="cpo-properties" class="section level2">
<h2>CPO Properties</h2>
<p>CPOs contain information about the kind of data they can work with,
and what kind of data they produce. <code>getCPOProperties</code>
returns a list with the slots <code>handling</code>,
<code>adding</code>, <code>needed</code>.
<code>properties$handling</code> indicates the kind of data a CPO can
handle, <code>properties$needed</code> indicates the kind of data it
needs the data receiver (e.g. attached learner) to have, and
<code>properties$adding</code> lists the properties it adds to a given
learner. An example is <code>cpoDummyEncode()</code>, a CPO that
converts factors to numerics: The receiving learner needs to handle
numerics, so <code>properties$needed == &quot;numerics&quot;</code>, but it
<em>adds</em> the ability to handle factors (since they are converted),
so <code>properties$adding = c(&quot;factors&quot;, &quot;ordered&quot;)</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOProperties</span>(<span class="fu">cpoDummyEncode</span>())</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $handling</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;numerics&quot;   &quot;factors&quot;    &quot;ordered&quot;    &quot;missings&quot;   &quot;cluster&quot;   </span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;classif&quot;    &quot;multilabel&quot; &quot;regr&quot;       &quot;surv&quot;       &quot;oneclass&quot;  </span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;twoclass&quot;   &quot;multiclass&quot; &quot;prob&quot;       &quot;se&quot;        </span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $adding</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factors&quot; &quot;ordered&quot;</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $needed</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numerics&quot;</span></span></code></pre></div>
<p>As a result, <code>cpoDummyEncode</code> endows a
<code>Learner</code> with the ability to train on data with factor
variables:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">train</span>(<span class="st">&quot;classif.fnn&quot;</span>, bc.task)  <span class="co"># gives an error</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in checkLearnerBeforeTrain(task, learner, weights): Task &#39;BreastCancer-example&#39; has factor inputs in &#39;Cl.thickness, Cell.size, Cell.shape, Marg.adhes...&#39;, but learner &#39;classif.fnn&#39; does not support that!</span></span></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">train</span>(<span class="fu">cpoDummyEncode</span>(<span class="at">reference.cat =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;&gt;%</span> <span class="fu">makeLearner</span>(<span class="st">&quot;classif.fnn&quot;</span>), bc.task)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Model for learner.id=classif.fnn.dummyencode; learner.class=CPOLearner</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trained on: task.id = BreastCancer-example; obs = 683; features = 9</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hyperparameters:</span></span></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getLearnerProperties</span>(<span class="st">&quot;classif.fnn&quot;</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;twoclass&quot;   &quot;multiclass&quot; &quot;numerics&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getLearnerProperties</span>(<span class="fu">cpoDummyEncode</span>(<span class="cn">TRUE</span>) <span class="sc">%&gt;&gt;%</span> <span class="fu">makeLearner</span>(<span class="st">&quot;classif.fnn&quot;</span>))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numerics&quot;   &quot;factors&quot;    &quot;ordered&quot;    &quot;twoclass&quot;   &quot;multiclass&quot;</span></span></code></pre></div>
<div id="sometimes-properties" class="section level3">
<h3><code>.sometimes</code>-Properties</h3>
<p>As described in more detail in the <a href="a_4_custom_CPOs.html">Building Custom CPOs</a> vignette,
<code>CPO</code>s can have properties that are considered only when
composing <code>CPO</code>s, or only when checking data returned by
<code>CPO</code>s. In short, consider a <code>CPO</code> that does
imputation, but only for factorial features. This <code>CPO</code> would
need to have <code>&quot;missings&quot;</code> in its <code>$adding</code>
properties slot, since it enables <code>Learner</code> to handle (some)
<code>Tasks</code> that have missing values. However, this
<code>CPO</code> may under certain circumstances still return data that
has missing values. This discrepancy is recorded internally by having
two “hidden” sets of properties that can be retrieved with
<code>getCPOProperties()</code> with <code>get.internal</code> set to
<code>TRUE</code>. These properties are <code>adding.min</code>, the
minimal set of properties added, and <code>needed.max</code>, the
maximal set of properties needed by consecutive operators. These can be
understood as a description of the “worst case” behaviour of the
<code>CPO</code>, since behaviour that is out of bounds of these sets
causes an error by the <code>mlrCPO</code>-framework.</p>
<p>An example is the <code>cpoApplyFun</code> <code>CPO</code>: When it
is constructed, it is not known what kind of properties will be added or
needed, so <code>adding.min</code> is empty while
<code>needed.max</code> is the set of all data properties. When
composing <code>CPO</code>s, this <code>CPO</code> is handled as if it
magically does exactly the data conversion necessary to make the
<code>CPO</code>s or <code>Learner</code> coming after it work with the
data. If this ends up not being the case, an error is thrown during
application or training by the following <code>CPO</code> or
<code>Learner</code>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOProperties</span>(<span class="fu">cpoApplyFun</span>(<span class="at">export =</span> <span class="st">&quot;export.all&quot;</span>), <span class="at">get.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $handling</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;numerics&quot;   &quot;factors&quot;    &quot;ordered&quot;    &quot;missings&quot;   &quot;cluster&quot;   </span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;classif&quot;    &quot;multilabel&quot; &quot;regr&quot;       &quot;surv&quot;       &quot;oneclass&quot;  </span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;twoclass&quot;   &quot;multiclass&quot; &quot;prob&quot;       &quot;se&quot;        </span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $adding</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numerics&quot; &quot;factors&quot;  &quot;ordered&quot;  &quot;missings&quot;</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $needed</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $adding.min</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $needed.max</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numerics&quot; &quot;factors&quot;  &quot;ordered&quot;  &quot;missings&quot;</span></span></code></pre></div>
</div>
</div>
<div id="cpo-affect" class="section level2">
<h2>CPO Affect</h2>
<p>When constructing a <code>CPO</code>, it is possible to restrict the
columns on which the <code>CPO</code> operates using the
<code>affect.*</code> parameters of the <code>CPOConstructor</code>.
These parameters are:</p>
<ul>
<li><strong><code>affect.index</code></strong>: Identify affected
columns by a vector of column indices.</li>
<li><strong><code>affect.names</code></strong>: Identify affected
columns by a vector of column names.</li>
<li><strong><code>affect.pattern</code></strong>: Match column names
against a <code>grep()</code> style regex pattern.</li>
<li><strong><code>affect.pattern.ignore.case</code></strong>: Ignore
case when matching by pattern.</li>
<li><strong><code>affect.pattern.perl</code></strong>: Use “perl” syntax
in <code>affect.pattern</code>.</li>
<li><strong><code>affect.pattern.fixed</code></strong>: Use fixed
pattern instead of regex in <code>affect.pattern</code>.</li>
<li><strong><code>affect.invert</code></strong>: Invert the columns to
affect: Only columns not matched by any of the other
<code>affect.*</code> parameters are affected.</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># onlhy PCA columns that have &#39;.Length&#39; in their name</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>cpo <span class="ot">=</span> <span class="fu">cpoPca</span>(<span class="at">affect.pattern =</span> <span class="st">&quot;.Length&quot;</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOAffect</span>(cpo)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $pattern</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;.Length&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>triris <span class="ot">=</span> iris <span class="sc">%&gt;&gt;%</span> cpo</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(triris)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Width Petal.Width Species       PC1         PC2</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         3.5         0.2  setosa -2.460241 -0.24479165</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         3.0         0.2  setosa -2.538962 -0.06093579</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         3.2         0.2  setosa -2.709611  0.08355948</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         3.1         0.2  setosa -2.565116  0.25420858</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         3.6         0.2  setosa -2.499602 -0.15286372</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         3.9         0.4  setosa -2.066375 -0.40249369</span></span></code></pre></div>
</div>
<div id="cpo-parameter-export" class="section level2">
<h2>CPO Parameter Export</h2>
<p>Sometimes when using many CPOs, their hyperparameters may get messy.
<code>mlrCPO</code> enables the user to control which hyperparameter get
exported. The parameter “export” can be one of
<code>&quot;export.default&quot;</code>, <code>&quot;export.set&quot;</code>,
<code>&quot;export.unset&quot;</code>, <code>&quot;export.default.set&quot;</code>,
<code>&quot;export.default.unset&quot;</code>, <code>&quot;export.all&quot;</code>,
<code>&quot;export.none&quot;</code>. “all” and “none” do what one expects;
“default” exports the “recommended” parameters; “set” and “unset” export
the values that have not been set, or only the values that were set (and
are not left as default). “default.set” and “default.unset” work as
“set” and “unset”, but restricted to the default exported
parameters.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">cpoScale</span>()</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center logical   - TRUE      -   -    TRUE     -</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale  logical   - TRUE      -   -    TRUE     -</span></span></code></pre></div>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">cpoScale</span>(<span class="at">export =</span> <span class="st">&quot;export.none&quot;</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale()[not exp&#39;d: center = TRUE, scale = TRUE]</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Empty parameter set.&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">cpoScale</span>(<span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">export =</span> <span class="st">&quot;export.unset&quot;</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE)[not exp&#39;d: scale = FALSE]</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center logical   - TRUE      -   -    TRUE     -</span></span></code></pre></div>
</div>
<div id="syntactic-sugar" class="section level2">
<h2>Syntactic Sugar</h2>
<p>There are some <code>%&gt;&gt;%</code>-related operators that perform
similar operations but may be more concise in certain applications. In
general these operators are left-assiciative, i.e. they are evaluated
after the expressions to their left were evaluated. Therefore, for
example, <code>a %&gt;&gt;% b %&lt;&lt;% c</code> is equivalent to
<code>(a %&gt;&gt;% b) %&lt;&lt;% c</code>. Exceptions are the
assignment operators, <code>%&lt;&gt;&gt;%</code> and
<code>%&lt;&lt;&lt;%</code>, as well as the <code>%&gt;|%</code>
operator, see below.</p>
<p>The operators are:</p>
<ul>
<li><strong><code>%&gt;&gt;%</code></strong>: The application,
composition or attachment operator.</li>
<li><strong><code>%&lt;&lt;%</code></strong>: The above with exchanged
arguments. <code>a %&lt;&lt;% b</code> is equivalent to
<code>b %&gt;&gt;% a</code></li>
<li><strong><code>%&lt;&gt;&gt;%</code></strong>:
<code>%&gt;&gt;%</code>, followed with assignment to the left. This
operator evaluates the arguments to its right before being evaluated
itself. <code>a %&lt;&gt;&gt;% b %&gt;&gt;% c</code> is equivalent to
<code>a = (a %&gt;&gt;% b %&gt;&gt;% c)</code>.</li>
<li><strong><code>%&lt;&lt;&lt;%</code></strong>:
<code>%&lt;&lt;%</code>, followed with assignment to the left. Note this
is <em>not</em> the <code>%&lt;&gt;&gt;%</code> operator with its
arguments flipped. This operator evaluates the arguments to its right
before being evaluated itself.
<code>a %&lt;&lt;&lt;% b %&gt;&gt;% c</code> is equivalent to
<code>a = (a %&lt;&lt;% (b %&gt;&gt;% c))</code>.</li>
<li><strong><code>%&gt;|%</code></strong>: <code>%&gt;&gt;%</code>,
followed by application of <code>retrafo()</code>. This operator
evaluates the arguments to its right before being evaluated itself.
<code>a %&gt;|% b %&lt;&lt;% c</code> is equivalent to
<code>retrafo(a %&gt;&gt;% (b %&lt;&lt;% c))</code>.</li>
<li><strong><code>%|&lt;%</code></strong>: The above with exchanged
arguments. Like most R operators, this one evaluates arguments to its
<em>left</em> before being evaluated itself.
<code>a %&gt;&gt;% b %|&lt;% c</code> is equivalent to
<code>retrafo((a %&gt;&gt;% b) %&lt;&lt;% c)</code>.</li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
