<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Martin Binder" />

<meta name="date" content="2025-06-16" />

<title>CPOs Built Into mlrCPO</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">CPOs Built Into mlrCPO</h1>
<h4 class="author">Martin Binder</h4>
<h4 class="date">2025-06-16</h4>



<div id="cpo-vignette-navigation" class="section level4">
<h4>CPO Vignette Navigation</h4>
<ol style="list-style-type: decimal">
<li><a href="a_1_getting_started.html">1. First Steps</a> (<a href="z_1_getting_started_terse.html">compact version</a>)</li>
<li><a href="a_2_mlrCPO_core.html">mlrCPO Core</a> (<a href="z_2_mlrCPO_core_terse.html">compact version</a>)</li>
<li>CPOs Built Into mlrCPO (<a href="z_3_all_CPOs_terse.html">compact
version</a>)</li>
<li><a href="a_4_custom_CPOs.html">Building Custom CPOs</a> (<a href="z_4_custom_CPOs_terse.html">compact version</a>)</li>
</ol>
</div>
<div id="listing-cpos" class="section level2">
<h2>Listing CPOs</h2>
<p>Builtin CPOs can be listed with <code>listCPO()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">listCPO</span>()[, <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;category&quot;</span>, <span class="st">&quot;subcategory&quot;</span>)]</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
category
</th>
<th style="text-align:left;">
subcategory
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
<a href="#cpodropconstants">cpoDropConstants</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
cleanup
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
cpoDropMostlyConstants
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
cleanup
</td>
</tr>
<tr>
<td style="text-align:left;">
36
</td>
<td style="text-align:left;">
<a href="#cpofixfactors">cpoFixFactors</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
cleanup
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
<a href="#cpocollapsefact">cpoCollapseFact</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
factor data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
<a href="#cpoasnumeric">cpoAsNumeric</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature conversion
</td>
</tr>
<tr>
<td style="text-align:left;">
16
</td>
<td style="text-align:left;">
<a href="#cpodummyencode">cpoDummyEncode</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature conversion
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
cpoImpactEncodeClassif
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature conversion
</td>
</tr>
<tr>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
cpoImpactEncodeRegr
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature conversion
</td>
</tr>
<tr>
<td style="text-align:left;">
13
</td>
<td style="text-align:left;">
cpoProbEncode
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature conversion
</td>
</tr>
<tr>
<td style="text-align:left;">
55
</td>
<td style="text-align:left;">
cpoQuantileBinNumerics
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature conversion
</td>
</tr>
<tr>
<td style="text-align:left;">
61
</td>
<td style="text-align:left;">
<a href="#cposelect">cpoSelect</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature selection
</td>
</tr>
<tr>
<td style="text-align:left;">
62
</td>
<td style="text-align:left;">
cpoSelectFreeProperties
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
feature selection
</td>
</tr>
<tr>
<td style="text-align:left;">
51
</td>
<td style="text-align:left;">
cpoAddCols
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
features
</td>
</tr>
<tr>
<td style="text-align:left;">
50
</td>
<td style="text-align:left;">
cpoMakeCols
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
features
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
<a href="#cpoapplyfun">cpoApplyFun</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
general data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
53
</td>
<td style="text-align:left;">
<a href="#cpomodelmatrix">cpoModelMatrix</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
general
</td>
</tr>
<tr>
<td style="text-align:left;">
37
</td>
<td style="text-align:left;">
cpoIca
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
numeric data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
54
</td>
<td style="text-align:left;">
<a href="#cpopca">cpoPca</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
numeric data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
58
</td>
<td style="text-align:left;">
<a href="#cposcale">cpoScale</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
numeric data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
59
</td>
<td style="text-align:left;">
<a href="#cposcalemaxabs">cpoScaleMaxAbs</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
numeric data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
60
</td>
<td style="text-align:left;">
<a href="#cposcalerange">cpoScaleRange</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
numeric data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
64
</td>
<td style="text-align:left;">
<a href="#cpospatialsign">cpoSpatialSign</a>
</td>
<td style="text-align:left;">
data
</td>
<td style="text-align:left;">
numeric data preprocessing
</td>
</tr>
<tr>
<td style="text-align:left;">
17
</td>
<td style="text-align:left;">
cpoFilterFeatures
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
general
</td>
</tr>
<tr>
<td style="text-align:left;">
32
</td>
<td style="text-align:left;">
cpoFilterAnova
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
cpoFilterCarscore
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
28
</td>
<td style="text-align:left;">
cpoFilterChiSquared
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
26
</td>
<td style="text-align:left;">
cpoFilterGainRatio
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
25
</td>
<td style="text-align:left;">
cpoFilterInformationGain
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
33
</td>
<td style="text-align:left;">
cpoFilterKruskal
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
23
</td>
<td style="text-align:left;">
cpoFilterLinearCorrelation
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
cpoFilterMrmr
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
30
</td>
<td style="text-align:left;">
cpoFilterOneR
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
35
</td>
<td style="text-align:left;">
cpoFilterPermutationImportance
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
24
</td>
<td style="text-align:left;">
cpoFilterRankCorrelation
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
29
</td>
<td style="text-align:left;">
cpoFilterRelief
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
21
</td>
<td style="text-align:left;">
cpoFilterRfCImportance
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
22
</td>
<td style="text-align:left;">
cpoFilterRfImportance
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
20
</td>
<td style="text-align:left;">
cpoFilterRfSRCImportance
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
27
</td>
<td style="text-align:left;">
cpoFilterSymmetricalUncertainty
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
31
</td>
<td style="text-align:left;">
cpoFilterUnivariate
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
cpoFilterVariance
</td>
<td style="text-align:left;">
featurefilter
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
38
</td>
<td style="text-align:left;">
cpoImpute
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
general
</td>
</tr>
<tr>
<td style="text-align:left;">
39
</td>
<td style="text-align:left;">
cpoImputeAll
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
general
</td>
</tr>
<tr>
<td style="text-align:left;">
40
</td>
<td style="text-align:left;">
cpoImputeConstant
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
48
</td>
<td style="text-align:left;">
cpoImputeHist
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
49
</td>
<td style="text-align:left;">
cpoImputeLearner
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
45
</td>
<td style="text-align:left;">
cpoImputeMax
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
42
</td>
<td style="text-align:left;">
cpoImputeMean
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
41
</td>
<td style="text-align:left;">
cpoImputeMedian
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
44
</td>
<td style="text-align:left;">
cpoImputeMin
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
43
</td>
<td style="text-align:left;">
cpoImputeMode
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
47
</td>
<td style="text-align:left;">
cpoImputeNormal
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
46
</td>
<td style="text-align:left;">
cpoImputeUniform
</td>
<td style="text-align:left;">
imputation
</td>
<td style="text-align:left;">
specialised
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
cpoCache
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
<a href="#cpocase">cpoCase</a>
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
<a href="#cpocbind">cpoCbind</a>
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
<a href="#cpomultiplex">cpoMultiplex</a>
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
<a href="#cpotransformparams">cpoTransformParams</a>
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
68
</td>
<td style="text-align:left;">
<a href="#cpowrap">cpoWrap</a>
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
wrap
</td>
</tr>
<tr>
<td style="text-align:left;">
69
</td>
<td style="text-align:left;">
cpoWrapRetrafoless
</td>
<td style="text-align:left;">
meta
</td>
<td style="text-align:left;">
wrap
</td>
</tr>
<tr>
<td style="text-align:left;">
65
</td>
<td style="text-align:left;">
cpoOversample
</td>
<td style="text-align:left;">
subsampling
</td>
<td style="text-align:left;">
binary classif
</td>
</tr>
<tr>
<td style="text-align:left;">
63
</td>
<td style="text-align:left;">
cpoSmote
</td>
<td style="text-align:left;">
subsampling
</td>
<td style="text-align:left;">
binary classif
</td>
</tr>
<tr>
<td style="text-align:left;">
66
</td>
<td style="text-align:left;">
cpoUndersample
</td>
<td style="text-align:left;">
subsampling
</td>
<td style="text-align:left;">
binary classif
</td>
</tr>
<tr>
<td style="text-align:left;">
67
</td>
<td style="text-align:left;">
cpoSample
</td>
<td style="text-align:left;">
subsampling
</td>
<td style="text-align:left;">
general
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
cpoApplyFunRegrTarget
</td>
<td style="text-align:left;">
target
</td>
<td style="text-align:left;">
general target transformation
</td>
</tr>
<tr>
<td style="text-align:left;">
56
</td>
<td style="text-align:left;">
cpoRegrResiduals
</td>
<td style="text-align:left;">
target
</td>
<td style="text-align:left;">
residual fitting
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
cpoLogTrafoRegr
</td>
<td style="text-align:left;">
target
</td>
<td style="text-align:left;">
target transformation
</td>
</tr>
<tr>
<td style="text-align:left;">
52
</td>
<td style="text-align:left;">
<a href="#cpomissingindicators">cpoMissingIndicators</a>
</td>
<td style="text-align:left;">
tools
</td>
<td style="text-align:left;">
imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
57
</td>
<td style="text-align:left;">
cpoResponseFromSE
</td>
<td style="text-align:left;">
tools
</td>
<td style="text-align:left;">
predict.type
</td>
</tr>
</tbody>
</table>
</div>
<div id="nullcpo" class="section level2">
<h2>NULLCPO</h2>
<p><code>NULLCPO</code> is the neutral element of
<code>%&gt;&gt;%</code>. It is returned by some functions when no other
CPO or Retrafo is present.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>NULLCPO</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.nullcpo</span>(NULLCPO)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>NULLCPO <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>NULLCPO <span class="sc">%&gt;&gt;%</span> NULLCPO</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as.list</span>(NULLCPO))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; list()</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">pipeCPO</span>(<span class="fu">list</span>())</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULLCPO</span></span></code></pre></div>
</div>
<div id="meta-cpo" class="section level2">
<h2>Meta-CPO</h2>
<div id="cpowrap" class="section level3">
<h3>cpoWrap</h3>
<p>A simple CPO with one parameter which gets applied to the data as
CPO. This is different from a multiplexer in that its parameter is free
and can take any value that behaves like a CPO. On the downside, this
does not expose the argument’s parameters to the outside.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>cpa <span class="ot">=</span> <span class="fu">cpoWrap</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cpa, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; wrap()</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Type len Def Constr Req Tunable Trafo</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; wrap.cpo untyped   -   -      -   -    TRUE     -</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(cpa, <span class="at">wrap.cpo =</span> <span class="fu">cpoScale</span>()))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052  setosa</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052  setosa</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052  setosa</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052  setosa</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052  setosa</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667  setosa</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(cpa, <span class="at">wrap.cpo =</span> <span class="fu">cpoPca</span>()))</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species       PC1        PC2         PC3          PC4</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa -2.684126 -0.3193972  0.02791483  0.002262437</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa -2.714142  0.1770012  0.21046427  0.099026550</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa -2.888991  0.1449494 -0.01790026  0.019968390</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa -2.745343  0.3182990 -0.03155937 -0.075575817</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa -2.728717 -0.3267545 -0.09007924 -0.061258593</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa -2.280860 -0.7413304 -0.16867766 -0.024200858</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co"># attaching the cpo applicator to a learner gives this learner a &quot;cpo&quot; hyperparameter</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># that can be set to any CPO.</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="fu">getParamSet</span>(<span class="fu">cpoWrap</span>() <span class="sc">%&gt;&gt;%</span> <span class="fu">makeLearner</span>(<span class="st">&quot;classif.logreg&quot;</span>))</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Type len  Def Constr Req Tunable Trafo</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; wrap.cpo untyped   -    -      -   -    TRUE     -</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; model    logical   - TRUE      -   -   FALSE     -</span></span></code></pre></div>
</div>
<div id="cpomultiplex" class="section level3">
<h3>cpoMultiplex</h3>
<p>Combine many CPOs into one, with an extra <code>selected.cpo</code>
parameter that chooses between them.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cpm <span class="ot">=</span> <span class="fu">cpoMultiplex</span>(<span class="fu">list</span>(cpoScale, cpoPca))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cpm, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiplex(selected.cpo = scale, scale.center = TRUE, scale.scale = TRUE, pca.center = TRUE, pca.scale = FALSE)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  Type len   Def    Constr Req Tunable Trafo</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; selected.cpo discrete   - scale scale,pca   -    TRUE     -</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center  logical   -  TRUE         -   Y    TRUE     -</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale   logical   -  TRUE         -   Y    TRUE     -</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.center    logical   -  TRUE         -   Y    TRUE     -</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.scale     logical   - FALSE         -   Y    TRUE     -</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(cpm, <span class="at">selected.cpo =</span> <span class="st">&quot;scale&quot;</span>))</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052  setosa</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052  setosa</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052  setosa</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052  setosa</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052  setosa</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667  setosa</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># every CPO&#39;s Hyperparameters are exported</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(cpm, <span class="at">selected.cpo =</span> <span class="st">&quot;scale&quot;</span>, <span class="at">scale.center =</span> <span class="cn">FALSE</span>))</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.8613268   1.1296201    0.3362663    0.140405  setosa</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    0.8275493   0.9682458    0.3362663    0.140405  setosa</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    0.7937718   1.0327956    0.3122473    0.140405  setosa</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    0.7768830   1.0005207    0.3602853    0.140405  setosa</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    0.8444380   1.1618950    0.3362663    0.140405  setosa</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    0.9119931   1.2587196    0.4083234    0.280810  setosa</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(cpm, <span class="at">selected.cpo =</span> <span class="st">&quot;pca&quot;</span>))</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species       PC1        PC2         PC3          PC4</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa -2.684126 -0.3193972  0.02791483  0.002262437</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa -2.714142  0.1770012  0.21046427  0.099026550</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa -2.888991  0.1449494 -0.01790026  0.019968390</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa -2.745343  0.3182990 -0.03155937 -0.075575817</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa -2.728717 -0.3267545 -0.09007924 -0.061258593</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa -2.280860 -0.7413304 -0.16867766 -0.024200858</span></span></code></pre></div>
</div>
<div id="cpocase" class="section level3">
<h3>cpoCase</h3>
<p>A CPO that builds data-dependent CPO networks. This is a generalized
CPO-Multiplexer that takes a function which decides (from the data, and
from user-specified hyperparameters) what CPO operation to perform.
Besides optional arguments, the used CPO’s Hyperparameters are exported
as well. This is a generalization of <code>cpoMultiplex</code>; however,
<code>requires</code> of the involved parameters are not adjusted, since
this is impossible in principle.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>s.and.p <span class="ot">=</span> <span class="fu">cpoCase</span>(<span class="fu">pSS</span>(logical.param<span class="sc">:</span> logical),</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">export.cpos =</span> <span class="fu">list</span>(<span class="fu">cpoScale</span>(), </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cpoPca</span>()),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">cpo.build =</span> <span class="cf">function</span>(data, target, logical.param, scale, pca) {</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (logical.param <span class="sc">||</span> <span class="fu">mean</span>(data[[<span class="dv">1</span>]]) <span class="sc">&gt;</span> <span class="dv">10</span>) {</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    scale <span class="sc">%&gt;&gt;%</span> pca</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    pca <span class="sc">%&gt;&gt;%</span> scale</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(s.and.p, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; case(scale.center = TRUE, scale.scale = TRUE, pca.center = TRUE, pca.scale = FALSE)</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  Type len   Def Constr Req Tunable Trafo</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; logical.param logical   -     -      -   -    TRUE     -</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center  logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale   logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.center    logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.scale     logical   - FALSE      -   -    TRUE     -</span></span></code></pre></div>
<p>The resulting CPO <code>s.and.p</code> performs scaling and PCA, with
the order depending on the parameter <code>logical.param</code> and on
whether the mean of the data’s first column exceeds 10. If either of
those is true, the data will be first scaled, then PCA’d, otherwise the
order is reversed. The all CPOs listed in <code>.export</code> are
passed to the <code>cpo.build</code>.</p>
</div>
<div id="cpocbind" class="section level3">
<h3>cpoCbind</h3>
<p><code>cbind</code> other CPOs as operation. The <code>cbinder</code>
makes it possible to build DAGs of CPOs that perform different
operations on data and paste the results next to each other.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>scale <span class="ot">=</span> <span class="fu">cpoScale</span>(<span class="at">id =</span> <span class="st">&quot;scale&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>scale.pca <span class="ot">=</span> scale <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoPca</span>()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>cbinder <span class="ot">=</span> <span class="fu">cpoCbind</span>(<span class="at">scaled =</span> scale, <span class="at">pcad =</span> scale.pca, <span class="at">original =</span> NULLCPO)</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cpoCbind recognises that &quot;scale.scale&quot; happens before &quot;pca.pca&quot; but is also fed to the</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># result directly. The summary draws a (crude) ascii-art graph.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cbinder, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cbind(scale.center = TRUE, scale.scale = TRUE, pca.center = TRUE, pca.scale = FALSE)</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 Type len   Def Constr Req Tunable Trafo</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.center logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; scale.scale  logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.center   logical   -  TRUE      -   -    TRUE     -</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.scale    logical   - FALSE      -   -    TRUE     -</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; O&gt;+   scale(center = TRUE, scale = TRUE)</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | |  </span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +&lt;O   pca(center = TRUE, scale = FALSE)[not exp&#39;d: tol = &lt;NULL&gt;, rank = &lt;NULL&gt;]</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; |  </span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; O   CBIND[scaled,pcad,original]</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> cbinder)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   scaled.Sepal.Length scaled.Sepal.Width scaled.Petal.Length scaled.Petal.Width</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          -0.8976739         1.01560199           -1.335752          -1.311052</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          -1.1392005        -0.13153881           -1.335752          -1.311052</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          -1.3807271         0.32731751           -1.392399          -1.311052</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          -1.5014904         0.09788935           -1.279104          -1.311052</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          -1.0184372         1.24503015           -1.335752          -1.311052</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          -0.5353840         1.93331463           -1.165809          -1.048667</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   scaled.Species pcad.Species  pcad.PC1   pcad.PC2    pcad.PC3     pcad.PC4</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         setosa       setosa -2.257141 -0.4784238  0.12727962  0.024087508</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         setosa       setosa -2.074013  0.6718827  0.23382552  0.102662845</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         setosa       setosa -2.356335  0.3407664 -0.04405390  0.028282305</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         setosa       setosa -2.291707  0.5953999 -0.09098530 -0.065735340</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         setosa       setosa -2.381863 -0.6446757 -0.01568565 -0.035802870</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         setosa       setosa -2.068701 -1.4842053 -0.02687825  0.006586116</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   original.Sepal.Length original.Sepal.Width original.Petal.Length</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                   5.1                  3.5                   1.4</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                   4.9                  3.0                   1.4</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                   4.7                  3.2                   1.3</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                   4.6                  3.1                   1.5</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                   5.0                  3.6                   1.4</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                   5.4                  3.9                   1.7</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   original.Petal.Width original.Species</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                  0.2           setosa</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                  0.2           setosa</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                  0.2           setosa</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                  0.2           setosa</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                  0.2           setosa</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                  0.4           setosa</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the unnecessary copies of &quot;Species&quot; are unfortunate. Remove them with cpoSelect:</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>selector <span class="ot">=</span> <span class="fu">cpoSelect</span>(<span class="at">type =</span> <span class="st">&quot;numeric&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>cbinder.select <span class="ot">=</span> <span class="fu">cpoCbind</span>(<span class="at">scaled =</span> selector <span class="sc">%&gt;&gt;%</span> scale, <span class="at">pcad =</span> selector <span class="sc">%&gt;&gt;%</span> scale.pca, <span class="at">original =</span> NULLCPO)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>cbinder.select</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cbind(scale.center = TRUE, scale.scale = TRUE, pca.center = TRUE, pca.scale = FALSE)</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> cbinder)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   scaled.Sepal.Length scaled.Sepal.Width scaled.Petal.Length scaled.Petal.Width</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          -0.8976739         1.01560199           -1.335752          -1.311052</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          -1.1392005        -0.13153881           -1.335752          -1.311052</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          -1.3807271         0.32731751           -1.392399          -1.311052</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          -1.5014904         0.09788935           -1.279104          -1.311052</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          -1.0184372         1.24503015           -1.335752          -1.311052</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          -0.5353840         1.93331463           -1.165809          -1.048667</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   scaled.Species pcad.Species  pcad.PC1   pcad.PC2    pcad.PC3     pcad.PC4</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         setosa       setosa -2.257141 -0.4784238  0.12727962  0.024087508</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         setosa       setosa -2.074013  0.6718827  0.23382552  0.102662845</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         setosa       setosa -2.356335  0.3407664 -0.04405390  0.028282305</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         setosa       setosa -2.291707  0.5953999 -0.09098530 -0.065735340</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         setosa       setosa -2.381863 -0.6446757 -0.01568565 -0.035802870</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         setosa       setosa -2.068701 -1.4842053 -0.02687825  0.006586116</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   original.Sepal.Length original.Sepal.Width original.Petal.Length</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                   5.1                  3.5                   1.4</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                   4.9                  3.0                   1.4</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                   4.7                  3.2                   1.3</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                   4.6                  3.1                   1.5</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                   5.0                  3.6                   1.4</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                   5.4                  3.9                   1.7</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   original.Petal.Width original.Species</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                  0.2           setosa</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                  0.2           setosa</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                  0.2           setosa</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                  0.2           setosa</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                  0.2           setosa</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                  0.4           setosa</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively, we apply the cbinder only to numerical data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoWrap</span>(cbinder, <span class="at">affect.type =</span> <span class="st">&quot;numeric&quot;</span>))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species scaled.Sepal.Length scaled.Sepal.Width scaled.Petal.Length</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa          -0.8976739         1.01560199           -1.335752</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa          -1.1392005        -0.13153881           -1.335752</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa          -1.3807271         0.32731751           -1.392399</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa          -1.5014904         0.09788935           -1.279104</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa          -1.0184372         1.24503015           -1.335752</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa          -0.5353840         1.93331463           -1.165809</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   scaled.Petal.Width  pcad.PC1   pcad.PC2    pcad.PC3     pcad.PC4</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          -1.311052 -2.257141 -0.4784238  0.12727962  0.024087508</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          -1.311052 -2.074013  0.6718827  0.23382552  0.102662845</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          -1.311052 -2.356335  0.3407664 -0.04405390  0.028282305</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          -1.311052 -2.291707  0.5953999 -0.09098530 -0.065735340</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          -1.311052 -2.381863 -0.6446757 -0.01568565 -0.035802870</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          -1.048667 -2.068701 -1.4842053 -0.02687825  0.006586116</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   original.Sepal.Length original.Sepal.Width original.Petal.Length</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                   5.1                  3.5                   1.4</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                   4.9                  3.0                   1.4</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                   4.7                  3.2                   1.3</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                   4.6                  3.1                   1.5</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                   5.0                  3.6                   1.4</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                   5.4                  3.9                   1.7</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   original.Petal.Width</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                  0.2</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                  0.2</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                  0.2</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                  0.2</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                  0.2</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                  0.4</span></span></code></pre></div>
</div>
<div id="cpotransformparams" class="section level3">
<h3>cpoTransformParams</h3>
<p><code>cpoTransformParams</code> wraps another <code>CPO</code> and
sets some of its hyperparameters to the value of expressions depending
on other hyperparameter values. This can be used to make a
transformation of parameters similar to the <code>trafo</code> parameter
of a <code>Param</code> in <code>ParamHelpers</code>, but it can also be
used to set multiple parameters at the same time, depending on a single
new parameter.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>cpo <span class="ot">=</span> <span class="fu">cpoTransformParams</span>(<span class="fu">cpoPca</span>(), <span class="fu">alist</span>(<span class="at">pca.scale =</span> pca.center))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>retr <span class="ot">=</span> pid.task <span class="sc">%&gt;|%</span> <span class="fu">setHyperPars</span>(cpo, <span class="at">pca.center =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getCPOTrainedState</span>(retr)<span class="sc">$</span>control  <span class="co"># both &#39;center&#39; and &#39;scale&#39; are FALSE</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; CPO Retrafo chain</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [RETRAFO pca(center = FALSE, scale = FALSE)]</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mplx <span class="ot">=</span> <span class="fu">cpoMultiplex</span>(<span class="fu">list</span>(<span class="fu">cpoIca</span>(<span class="at">export =</span> <span class="st">&quot;n.comp&quot;</span>), <span class="fu">cpoPca</span>(<span class="at">export =</span> <span class="st">&quot;rank&quot;</span>)))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>mplx</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trafo chain of 1 cpos:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiplex(selected.cpo = ica, ica.n.comp = &lt;NULL&gt;, pca.rank = &lt;NULL&gt;)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Operating: feature</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ParamSet:</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  Type len    Def   Constr Req Tunable Trafo</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; selected.cpo discrete   -    ica  ica,pca   -    TRUE     -</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ica.n.comp    integer   - &lt;NULL&gt; 1 to Inf   Y    TRUE     -</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pca.rank      integer   - &lt;NULL&gt; 1 to Inf   Y    TRUE     -</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>mtx <span class="ot">=</span> <span class="fu">cpoTransformParams</span>(mplx, <span class="fu">alist</span>(<span class="at">ica.n.comp =</span> comp, <span class="at">pca.rank =</span> comp),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pSS</span>(comp<span class="sc">:</span> integer[<span class="dv">1</span>, ]), <span class="fu">list</span>(<span class="at">comp =</span> <span class="dv">1</span>))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(mtx, <span class="at">selected.cpo =</span> <span class="st">&quot;ica&quot;</span>, <span class="at">comp =</span> <span class="dv">2</span>))</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species         V1       V2</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa  0.5040262 1.372772</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa -0.5026081 1.277214</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa -0.4470063 1.369134</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa -0.7903465 1.261004</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa  0.5165524 1.396033</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa  1.3797295 1.270769</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">setHyperPars</span>(mtx, <span class="at">selected.cpo =</span> <span class="st">&quot;pca&quot;</span>, <span class="at">comp =</span> <span class="dv">3</span>))</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Species       PC1        PC2         PC3</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  setosa -2.684126 -0.3193972  0.02791483</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  setosa -2.714142  0.1770012  0.21046427</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  setosa -2.888991  0.1449494 -0.01790026</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  setosa -2.745343  0.3182990 -0.03155937</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  setosa -2.728717 -0.3267545 -0.09007924</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  setosa -2.280860 -0.7413304 -0.16867766</span></span></code></pre></div>
</div>
</div>
<div id="data-manipulation" class="section level2">
<h2>Data Manipulation</h2>
<div id="cposcale" class="section level3">
<h3>cpoScale</h3>
<p>Implements the <code>base::scale</code> function.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b =</span> <span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    a  b</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -1  1</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  0  0</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1 -1</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScale</span>(<span class="at">scale =</span> <span class="cn">FALSE</span>)  <span class="co"># center = TRUE</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    a   b</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -1  10</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  0   0</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1 -10</span></span></code></pre></div>
</div>
<div id="cpopca" class="section level3">
<h3>cpoPca</h3>
<p>Implements <code>stats::prcomp</code>. No scaling or centering is
performed.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoPca</span>()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PC1           PC2</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -10.04988  4.163336e-16</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   0.00000  0.000000e+00</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  10.04988 -4.163336e-16</span></span></code></pre></div>
</div>
<div id="cpodummyencode" class="section level3">
<h3>cpoDummyEncode</h3>
<p>Dummy encoding of factorial variables. Optionally uses the first
factor as reference variable.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoDummyEncode</span>())</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Speciessetosa</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2             1</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4         0.2             1</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2             1</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5         0.2             1</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4         0.2             1</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7         0.4             1</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Speciesversicolor Speciesvirginica</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                 0                0</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                 0                0</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                 0                0</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                 0                0</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                 0                0</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                 0                0</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoDummyEncode</span>(<span class="at">reference.cat =</span> <span class="cn">TRUE</span>))</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Speciesversicolor</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2                 0</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4         0.2                 0</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2                 0</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5         0.2                 0</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4         0.2                 0</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7         0.4                 0</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Speciesvirginica</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                0</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                0</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                0</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                0</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                0</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                0</span></span></code></pre></div>
</div>
<div id="cposelect" class="section level3">
<h3>cpoSelect</h3>
<p>Select to use only certain columns of a dataset. Select by column
index, name, or regex pattern.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoSelect</span>(<span class="at">pattern =</span> <span class="st">&quot;Width&quot;</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Width Petal.Width</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         3.5         0.2</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         3.0         0.2</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         3.2         0.2</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         3.1         0.2</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         3.6         0.2</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         3.9         0.4</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># selection is additive</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoSelect</span>(<span class="at">pattern =</span> <span class="st">&quot;Width&quot;</span>, <span class="at">type =</span> <span class="st">&quot;factor&quot;</span>))</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Width Petal.Width Species</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         3.5         0.2  setosa</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         3.0         0.2  setosa</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         3.2         0.2  setosa</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         3.1         0.2  setosa</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         3.6         0.2  setosa</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         3.9         0.4  setosa</span></span></code></pre></div>
</div>
<div id="cpodropconstants" class="section level3">
<h3>cpoDropConstants</h3>
<p>Drops constant features or numerics, with variable tolerance</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoDropConstants</span>()  <span class="co"># drops &#39;species&#39;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4         0.2</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5         0.2</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4         0.2</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7         0.4</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoDropConstants</span>(<span class="at">abs.tol =</span> <span class="fl">0.2</span>)  <span class="co"># also drops &#39;Petal.Width&#39;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7</span></span></code></pre></div>
</div>
<div id="cpofixfactors" class="section level3">
<h3>cpoFixFactors</h3>
<p>Drops unused factors and makes sure prediction data has the same
factor levels as training data.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(iris<span class="sc">$</span>Species)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;setosa&quot;     &quot;versicolor&quot; &quot;virginica&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>irisfix <span class="ot">=</span> <span class="fu">head</span>(iris) <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoFixFactors</span>()  <span class="co"># Species only has level &#39;setosa&#39; in train</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(irisfix<span class="sc">$</span>Species)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;setosa&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>rf <span class="ot">=</span> <span class="fu">retrafo</span>(irisfix)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">100</span>, <span class="dv">140</span>), ]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            5.1         3.5          1.4         0.2     setosa</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 100          5.7         2.8          4.1         1.3 versicolor</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 140          6.9         3.1          5.4         2.1  virginica</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">100</span>, <span class="dv">140</span>), ] <span class="sc">%&gt;&gt;%</span> rf</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 100          5.7         2.8          4.1         1.3    &lt;NA&gt;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 140          6.9         3.1          5.4         2.1    &lt;NA&gt;</span></span></code></pre></div>
</div>
<div id="cpomissingindicators" class="section level3">
<h3>cpoMissingIndicators</h3>
<p>Creates columns indicating missing data. Most useful in combination
with cpoCbind.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>impdata <span class="ot">=</span> df</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>impdata[[<span class="dv">1</span>]][<span class="dv">1</span>] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>impdata</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    a   b</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 NA -10</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2 -20</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3 -30</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>impdata <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoMissingIndicators</span>()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       a</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  TRUE</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 FALSE</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 FALSE</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>impdata <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoCbind</span>(NULLCPO, <span class="at">dummy =</span> <span class="fu">cpoMissingIndicators</span>())</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    a   b dummy.a</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 NA -10    TRUE</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2 -20   FALSE</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3 -30   FALSE</span></span></code></pre></div>
</div>
<div id="cpoapplyfun" class="section level3">
<h3>cpoApplyFun</h3>
<p>Apply an univariate function to data columns</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoApplyFun</span>(<span class="cf">function</span>(x) <span class="fu">sqrt</span>(x) <span class="sc">-</span> <span class="dv">10</span>, <span class="at">affect.type =</span> <span class="st">&quot;numeric&quot;</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    -7.741682   -8.129171    -8.816784   -9.552786  setosa</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    -7.786406   -8.267949    -8.816784   -9.552786  setosa</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    -7.832052   -8.211146    -8.859825   -9.552786  setosa</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    -7.855239   -8.239318    -8.775255   -9.552786  setosa</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    -7.763932   -8.102633    -8.816784   -9.552786  setosa</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    -7.676210   -8.025158    -8.696160   -9.367544  setosa</span></span></code></pre></div>
</div>
<div id="cpoasnumeric" class="section level3">
<h3>cpoAsNumeric</h3>
<p>Convert (non-numeric) features to numeric</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris[<span class="fu">sample</span>(<span class="fu">nrow</span>(iris), <span class="dv">10</span>), ] <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoAsNumeric</span>())</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14           4.3         3.0          1.1         0.1       1</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 50           5.0         3.3          1.4         0.2       1</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 118          7.7         3.8          6.7         2.2       3</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43           4.4         3.2          1.3         0.2       1</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 150          5.9         3.0          5.1         1.8       3</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 148          6.5         3.0          5.2         2.0       3</span></span></code></pre></div>
</div>
<div id="cpocollapsefact" class="section level3">
<h3>cpoCollapseFact</h3>
<p>Combine low prevalence factors. Set
<code>max.collapsed.class.prevalence</code> how big the combined factor
level may be.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>iris2 <span class="ot">=</span> iris</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>iris2<span class="sc">$</span>Species <span class="ot">=</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">as.character</span>(iris2<span class="sc">$</span>Species[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)])))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris2, <span class="dv">10</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           5.1         3.5          1.4         0.2       a</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           4.9         3.0          1.4         0.2       b</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           4.7         3.2          1.3         0.2       c</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4.6         3.1          1.5         0.2       b</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           5.0         3.6          1.4         0.2       b</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           5.4         3.9          1.7         0.4       c</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           4.6         3.4          1.4         0.3       b</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           5.0         3.4          1.5         0.2       c</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           4.4         2.9          1.4         0.2  setosa</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris2 <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoCollapseFact</span>(<span class="at">max.collapsed.class.prevalence =</span> <span class="fl">0.2</span>), <span class="dv">10</span>)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           5.1         3.5          1.4         0.2 collapsed</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           4.9         3.0          1.4         0.2 collapsed</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           4.7         3.2          1.3         0.2 collapsed</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           4.6         3.1          1.5         0.2 collapsed</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           5.0         3.6          1.4         0.2 collapsed</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           5.4         3.9          1.7         0.4 collapsed</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           4.6         3.4          1.4         0.3 collapsed</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           5.0         3.4          1.5         0.2 collapsed</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           4.4         2.9          1.4         0.2    setosa</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          4.9         3.1          1.5         0.1    setosa</span></span></code></pre></div>
</div>
<div id="cpomodelmatrix" class="section level3">
<h3>cpoModelMatrix</h3>
<p>Specify which columns get used, and how they are transformed, using a
<code>formula</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoModelMatrix</span>(<span class="sc">~</span><span class="dv">0</span> <span class="sc">+</span> Species<span class="sc">:</span>Petal.Width))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Speciessetosa:Petal.Width Speciesversicolor:Petal.Width</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                       0.2                             0</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                       0.2                             0</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                       0.2                             0</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                       0.2                             0</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                       0.2                             0</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                       0.4                             0</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Speciesvirginica:Petal.Width</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                            0</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                            0</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                            0</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                            0</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                            0</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                            0</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="co"># use . + ... to retain originals</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoModelMatrix</span>(<span class="sc">~</span><span class="dv">0</span> <span class="sc">+</span> . <span class="sc">+</span> Species<span class="sc">:</span>Petal.Width))</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Speciessetosa</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2             1</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4         0.2             1</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2             1</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6         3.1          1.5         0.2             1</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0         3.6          1.4         0.2             1</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4         3.9          1.7         0.4             1</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Speciesversicolor Speciesvirginica Petal.Width:Speciesversicolor</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                 0                0                             0</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                 0                0                             0</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                 0                0                             0</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                 0                0                             0</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                 0                0                             0</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                 0                0                             0</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Petal.Width:Speciesvirginica</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                            0</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                            0</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                            0</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                            0</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                            0</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                            0</span></span></code></pre></div>
</div>
<div id="cposcalerange" class="section level3">
<h3>cpoScaleRange</h3>
<p>scale values to a given range</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScaleRange</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   -0.5555556  0.25000000   -0.8644068  -0.9166667  setosa</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   -0.6666667 -0.16666667   -0.8644068  -0.9166667  setosa</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   -0.7777778  0.00000000   -0.8983051  -0.9166667  setosa</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   -0.8333333 -0.08333333   -0.8305085  -0.9166667  setosa</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   -0.6111111  0.33333333   -0.8644068  -0.9166667  setosa</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   -0.3888889  0.58333333   -0.7627119  -0.7500000  setosa</span></span></code></pre></div>
</div>
<div id="cposcalemaxabs" class="section level3">
<h3>cpoScaleMaxAbs</h3>
<p>Multiply features to set the maximum absolute value.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoScaleMaxAbs</span>(<span class="fl">0.1</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   0.06455696  0.07954545   0.02028986       0.008  setosa</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   0.06202532  0.06818182   0.02028986       0.008  setosa</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   0.05949367  0.07272727   0.01884058       0.008  setosa</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   0.05822785  0.07045455   0.02173913       0.008  setosa</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   0.06329114  0.08181818   0.02028986       0.008  setosa</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   0.06835443  0.08863636   0.02463768       0.016  setosa</span></span></code></pre></div>
</div>
<div id="cpospatialsign" class="section level3">
<h3>cpoSpatialSign</h3>
<p>Normalize values row-wise</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoSpatialSign</span>())</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.8037728   0.5516088    0.2206435  0.03152050  setosa</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    0.8281329   0.5070201    0.2366094  0.03380134  setosa</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    0.8053331   0.5483119    0.2227517  0.03426949  setosa</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    0.8000302   0.5391508    0.2608794  0.03478392  setosa</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    0.7909650   0.5694948    0.2214702  0.03163860  setosa</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    0.7841750   0.5663486    0.2468699  0.05808704  setosa</span></span></code></pre></div>
</div>
</div>
<div id="imputation" class="section level2">
<h2>Imputation</h2>
<p>There are two <em>general</em> and many <em>specialised</em>
imputation CPOs. The general imputation CPOs have parameters that let
them use different imputation methods on different columns. They are a
thin wrapper around <code>mlr</code>’s <code>impute()</code> and
<code>reimpute()</code> functions. The specialised imputation CPOs each
implement exactly one imputation method and are closer to the behaviour
of typical CPOs.</p>
<div id="general-imputation-wrappers" class="section level4">
<h4>General Imputation Wrappers</h4>
<p><code>cpoImpute</code> and <code>cpoImputeAll</code> both have
parameters very much like <code>impute()</code>. The latter assumes that
<em>all</em> columns of its input is somehow being imputed and can be
preprended to a learner to give it the ability to work with missing
data. It will, however, throw an error if data is missing after
imputation.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>impdata <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoImpute</span>(<span class="at">cols =</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="fu">imputeMedian</span>()))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     a   b</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2.5 -10</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2.0 -20</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 3.0 -30</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>impdata <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoImpute</span>(<span class="at">cols =</span> <span class="fu">list</span>(<span class="at">b =</span> <span class="fu">imputeMedian</span>()))  <span class="co"># NAs remain</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    a   b</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 NA -10</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2 -20</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3 -30</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>impdata <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoImputeAll</span>(<span class="at">cols =</span> <span class="fu">list</span>(<span class="at">b =</span> <span class="fu">imputeMedian</span>()))  <span class="co"># error, since NAs remain</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in assertPropertiesOk(present.properties, setdiff(allowed.properties, : Data returned by CPO trafo has property missings that impute declared in .properties.adding.</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; properties in .properties.adding may not be present in trafo output.</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>missing.task <span class="ot">=</span> <span class="fu">makeRegrTask</span>(<span class="st">&quot;missing.task&quot;</span>, impdata, <span class="at">target =</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the following gives an error, since &#39;cpoImpute&#39; does not make sure all missings are removed</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and hence does not add the &#39;missings&#39; property.</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">train</span>(<span class="fu">cpoImpute</span>(<span class="at">cols =</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="fu">imputeMedian</span>())) <span class="sc">%&gt;&gt;%</span> <span class="fu">makeLearner</span>(<span class="st">&quot;regr.lm&quot;</span>), missing.task)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in checkLearnerBeforeTrain(task, learner, weights): Task &#39;missing.task&#39; has missing values in &#39;a&#39;, but learner &#39;regr.lm.impute&#39; does not support that!</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instead, the following works:</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">train</span>(<span class="fu">cpoImputeAll</span>(<span class="at">cols =</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="fu">imputeMedian</span>())) <span class="sc">%&gt;&gt;%</span> <span class="fu">makeLearner</span>(<span class="st">&quot;regr.lm&quot;</span>), missing.task)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Model for learner.id=regr.lm.impute; learner.class=CPOLearner</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Trained on: task.id = missing.task; obs = 3; features = 1</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hyperparameters: impute.target.cols=character(0),impute.classes=list(),impute.cols=a=&lt;ImputeMethod&gt;,impute.dummy.classes=character(0),impute.dummy.cols=character(0),impute.dummy.type=factor,impute.force.dummies=FALSE,impute.impute.new.levels=TRUE,impute.recode.factor.levels=TRUE</span></span></code></pre></div>
</div>
<div id="specialised-imputation-wrappers" class="section level4">
<h4>Specialised Imputation Wrappers</h4>
<p>There is one for each imputation method.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>impdata <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoImputeConstant</span>(<span class="dv">10</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    a   b</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 10 -10</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2 -20</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3 -30</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">getTaskData</span>(missing.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoImputeMedian</span>())</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     a   b</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2.5 -10</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2.0 -20</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 3.0 -30</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co"># The specialised impute CPOs are:</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="fu">listCPO</span>()[<span class="fu">listCPO</span>()<span class="sc">$</span>category <span class="sc">==</span> <span class="st">&quot;imputation&quot;</span> <span class="sc">&amp;</span> <span class="fu">listCPO</span>()<span class="sc">$</span>subcategory <span class="sc">==</span> <span class="st">&quot;specialised&quot;</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;description&quot;</span>)]</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 name</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 40 cpoImputeConstant</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 48     cpoImputeHist</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 49  cpoImputeLearner</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 45      cpoImputeMax</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 42     cpoImputeMean</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 41   cpoImputeMedian</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ... (#rows: 10, #cols: 1)</span></span></code></pre></div>
</div>
</div>
<div id="feature-filtering" class="section level2">
<h2>Feature Filtering</h2>
<p>There is one <em>general</em> and many <em>specialised</em> feature
filtering CPOs. The general filtering CPO,
<code>cpoFilterFeatures</code>, is a thin wrapper around
<code>filterFeatures</code> and takes the filtering method as its
argument. The specialised CPOs each call a specific filtering
method.</p>
<p>Most arguments of <code>filterFeatures</code> are reflected in the
CPOs. The exceptions being: 1. for <code>filterFeatures</code>, the
filter method arguments are given in a list <code>filter.args</code>,
instead of in <code>...</code> 2. The argument <code>fval</code> was
dropped for the specialised filter CPOs. 3. The argument
<code>mandatory.feat</code> was dropped. Use <code>affect.*</code>
parameters to prevent features from being filtered.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">getTaskData</span>(iris.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoFilterFeatures</span>(<span class="at">method =</span> <span class="st">&quot;variance&quot;</span>, <span class="at">perc =</span> <span class="fl">0.5</span>)))</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Petal.Length Species</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1          1.4  setosa</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9          1.4  setosa</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7          1.3  setosa</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6          1.5  setosa</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0          1.4  setosa</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4          1.7  setosa</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">getTaskData</span>(iris.task <span class="sc">%&gt;&gt;%</span> <span class="fu">cpoFilterVariance</span>(<span class="at">perc =</span> <span class="fl">0.5</span>)))</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Petal.Length Species</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          5.1          1.4  setosa</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          4.9          1.4  setosa</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          4.7          1.3  setosa</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          4.6          1.5  setosa</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          5.0          1.4  setosa</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          5.4          1.7  setosa</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="co"># The specialised filter CPOs are:</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="fu">listCPO</span>()[<span class="fu">listCPO</span>()<span class="sc">$</span>category <span class="sc">==</span> <span class="st">&quot;featurefilter&quot;</span> <span class="sc">&amp;</span> <span class="fu">listCPO</span>()<span class="sc">$</span>subcategory <span class="sc">==</span> <span class="st">&quot;specialised&quot;</span>,</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>          <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;description&quot;</span>)]</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        name</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32           cpoFilterAnova</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19        cpoFilterCarscore</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 28      cpoFilterChiSquared</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 26       cpoFilterGainRatio</span></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 25 cpoFilterInformationGain</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 33         cpoFilterKruskal</span></span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ... (#rows: 18, #cols: 1)</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
